## 实现方案

### 问题分析
用户需要实现键盘输入"---"时的快速跳转功能，从X1直接跳到X2（如41→42, 51→52等），方便调试。

### 实现思路
1. **利用现有输入检测机制**：在`DialogueSystem.cs`的`Update`方法中扩展现有作弊码检测
2. **获取当前脚本ID**：通过`DialogueManager.instance.fileToRead.name`获取当前脚本文件名
3. **实现跳转逻辑**：将X1格式转换为X2格式，执行跳转命令
4. **不修改药品相关代码**：专注于实现调试快捷功能

### 核心代码修改
```csharp
// 在DialogueSystem.cs的Update方法中添加
private const string SKIP_SCRIPT_CODE = "---"; // 跳转到下一个脚本的作弊码

// 在现有的输入检测逻辑中添加
if (inputBuffer == SKIP_SCRIPT_CODE)
{
    Debug.Log("Skip script code detected! Jumping to next script...");
    
    // 获取当前脚本ID
    if (DialogueManager.instance != null && DialogueManager.instance.fileToRead != null)
    {
        string currentScript = DialogueManager.instance.fileToRead.name;
        if (!string.IsNullOrEmpty(currentScript))
        {
            try
            {
                // 直接将当前脚本ID + 1，实现X1→X2跳转
                int scriptNumber = int.Parse(currentScript);
                string nextScript = (scriptNumber + 1).ToString();
                
                // 执行跳转命令
                CommandManager.instance.Execute("startdialogue", "-f", nextScript);
            }
            catch (System.Exception e)
            {
                Debug.LogError($"Failed to skip script: {e.Message}");
            }
        }
    }
    
    // 清空输入缓冲区
    inputBuffer = "";
}
```

### 实现步骤
1. **修改DialogueSystem.cs**：在Update方法中添加"---"检测逻辑
2. **测试功能**：运行游戏，在对话界面输入"---"测试跳转效果
3. **确保兼容性**：不影响现有功能，仅作为调试辅助

### 预期效果
- 当在对话界面输入"---"时，自动从当前X1脚本跳转到X2脚本
- 支持11→12, 21→22, 31→32, 41→42, 51→52, 61→62等所有类似格式
- 方便调试，无需每次都进行采药流程
- 不影响游戏的正常运行

### 涉及文件
- `e:\1.Zhongyao-Game  Google gemini3 未来以来太牛了前端不是梦以后\Zhongyao-Game\Assets\Scripts\Core\Dialogue\DialogueSystem.cs`