## 分析当前实现

当前的MarksManager.cs文件实现了以下逻辑：
1. 遍历所有标记，检查是否应该激活
2. 对于当前最新解锁的关卡标记（`markIndex == playerScriptIndex`），添加高亮效果
3. 对于其他已解锁标记，移除高亮效果

## 问题分析

用户反馈：
- 所有圈圈都有高亮效果，而不是只有新解锁的
- 要求逐关解锁，每一关新出现的红圈圈加高亮，之前的不加

用户提出的新思路：
- 在每一关开始制药的时候移除本关所有的高亮效果
- 在下一关开始的时候给新出现的加高亮效果
- 之前的就不用管了

## 解决方案

### 1. 修改MarksManager.cs文件

- **添加新方法**：
  - `RemoveHighlightsForLevel(int level)` - 移除指定关卡的高亮效果
  - `AddHighlightsForNewLevel(int level)` - 为新解锁的关卡添加高亮效果

- **修改现有方法**：
  - 简化CheckMarksState方法，使其只负责标记的激活/禁用
  - 确保高亮效果的添加和移除通过新方法进行

### 2. 集成到游戏流程中

- **在每一关开始制药时**：
  - 调用`RemoveHighlightsForLevel(currentLevel)`移除当前关卡的高亮效果

- **在每一关解锁时**：
  - 调用`AddHighlightsForNewLevel(newLevel)`为新解锁的关卡添加高亮效果

### 3. 确保逻辑简单直接

- 避免使用复杂的条件判断
- 确保每一关的逻辑清晰易懂
- 硬编码处理五关的情况，确保准确性

### 4. 验证修改

- 运行代码诊断工具，确保没有编译错误
- 测试在编辑器中的效果，确保只有新解锁的关卡标记有高亮效果
- 构建验证版本，确保在exe中也能看到效果

## 预期结果

- 当解锁第1关时，第1关的标记显示高亮效果
- 当开始第1关制药时，移除第1关的高亮效果
- 当解锁第2关时，第2关的标记显示高亮效果，第1关的标记不显示
- 以此类推，直到第5关
- 效果在编辑器和构建版本中都能正常显示